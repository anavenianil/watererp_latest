
<div>
	<h2>
		<span>ConnectionTerminate</span> {{connectionTerminate.id}}
	</h2>
	<div class="panel panel-primary">
		<div class="panel-heading clearfix">
			<h3 class="panel-title pull-left">Requests</h3>
		</div>
		<div class="list-group">
			<div class="table-responsive">
				<table class="clickableTable table table-striped">
					<thead>
						<tr>
							<th>From</th>
							<th>To</th>
							<th>Remarks</th>
							<th>Actioned Date</th>
							<th>IP Address</th>
							<th>Status</th>
						</tr>
					</thead>
					<tbody>
						<tr ng-repeat="item in requestWorkflowHistorys">
							<td>{{item.assignedFrom.firstName}}
								{{item.assignedFrom.lastName}} ({{item.assignedFrom.login}})</td>
							<td>{{item.assignedTo.firstName}}
								{{item.assignedTo.lastName}} ({{item.assignedTo.login}})</td>
							<td>{{item.remarks}}</td>
							<td>{{item.actionedDate | date:'mediumDate'}}</td>
							<td>{{item.ipAddress}}</td>
							<td>{{item.statusMaster.status}}</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div class="panel panel-primary">
		<div class="panel-heading clearfix">
			<h3 class="panel-title pull-left">Connection Termination</h3>
		</div>
		<div class="list-group">
			<div class="list-group-item">
				<fieldset>
					<legend>Customer Details</legend>
					<div class="row">
						<div class="col-sm-3">
							<label>CAN</label>
							<h5 class="list-group-item-heading">{{custDetails.can}}</h5>
						</div>
						<div class="col-sm-3">
							<label>Name</label>
							<h5 class="list-group-item-heading">{{custDetails.consName}}</h5>
						</div>
						<div class="col-sm-3">
							<label>Mobile Number</label>
							<h5 class="list-group-item-heading">{{custDetails.mobileNo}}</h5>
						</div>
						<div class="col-sm-3">
							<label>E-mail</label>
							<h5 class="list-group-item-heading">{{custDetails.email}}</h5>
						</div>
					</div>
				</fieldset>
				<fieldset>
					<legend>Meter Info.</legend>
					<div class="row">
						<div class="col-sm-3">
							<label class="control-label" for="field_meterRecovered">Meter
								Recovered</label>
							<div class="radio">
								<label class="radio-inline"> <input type="radio"
									name="meterRecovered"
									ng-model="connectionTerminate.meterRecovered" ng-value="true">Yes
								</label> &nbsp;&nbsp;&nbsp;&nbsp;<label class="radio-inline"> <input
									type="radio" name="meterRecovered"
									ng-model="workflowDTO.connectionTerminate.meterRecovered"
									ng-value="false">No
								</label>
							</div>
						</div>
						<div class="col-sm-3">
							<label class="control-label" for="field_prevReading">Last
								Meter Reading(billed)</label> <input type="number" class="form-control"
								name="prevReading" id="field_prevReading"
								ng-model="custDetails.prevReading" disabled />
						</div>
						<div class="col-sm-3">
							<label class="control-label" for="field_lastMeterReading">Final
								Meter Reading</label> <input type="number" class="form-control"
								name="lastMeterReading" id="field_lastMeterReading"
								ng-disabled="workflowDTO.connectionTerminate.meterRecovered==false"
								ng-model="workflowDTO.connectionTerminate.lastMeterReading" 
								ng-blur="checkReading(custDetails.prevReading, workflowDTO.connectionTerminate.lastMeterReading)"/>
						</div>
						<div class="col-sm-3">
							<label class="control-label" for="field_meterRecoveredDate">Meter
								Recovered Date</label>
							<div class="form-group">
								<div class='input-group date' id='field_meterRecoveredDate'>
									<input id="field_meterRecoveredDate" type="text"
										class="form-control" uib-datepicker-popup="{{dateformat}}"
										ng-model="workflowDTO.connectionTerminate.meterRecoveredDate"
										max-date="maxDt"
										ng-disabled="workflowDTO.connectionTerminate.meterRecovered==false"
										is-open="datePickerForMeterRecoveredDate.status.opened" /> <span
										class="input-group-btn">
										<button type="button" class="btn btn-default"
											ng-click="datePickerForMeterRecoveredDateOpen($event)"
											ng-disabled="workflowDTO.connectionTerminate.meterRecovered==false">
											<i class="glyphicon glyphicon-calendar"></i>
										</button>
									</span>
								</div>
							</div>
						</div>
					</div>
				</fieldset>
				<hr>
				<div class="row">
					<div class="col-sm-3">
						<label class="control-label" for="field_approvedDate">Approved
							Date</label>
						<div class="form-group">
							<div class='input-group date' id='field_approvedDate'>
								<input id="field_approvedDate" type="text" class="form-control"
									uib-datepicker-popup="{{dateformat}}"
									ng-model="workflowDTO.approvedDate" max-date="maxDt"
									is-open="datePickerForApprovedDate.status.opened" /> <span
									class="input-group-btn">
									<button type="button" class="btn btn-default"
										ng-click="datePickerForApprovedDateOpen($event)">
										<i class="glyphicon glyphicon-calendar"></i>
									</button>
								</span>
							</div>
						</div>
					</div>
					<div class="col-sm-9">
						<label class="control-label" for="field_remarks">Remarks</label>
						<textarea rows="3" cols="50" class="form-control" name="remarks"
							style="resize: none" id="field_remarks" max="20" ng-model="workflowDTO.remarks"></textarea>
					</div>
				</div>
			</div>
		</div>
	</div>
	<button type="button" class="btn btn-success pull-right"
		ng-show="canDecline()" ng-click="approve(workflowDTO)">
		<span class="glyphicon glyphicon-check"></span> &nbsp;Approve
	</button>

	<span class="pull-right">&nbsp;&nbsp;&nbsp;</span>

	<button type="button" class="btn btn-danger pull-right"
		ng-show="canDecline()" ng-disabled="isSaving"
		ng-click="declineRequest(workflowDTO)">
		<span class="glyphicon glyphicon-remove-circle"></span> &nbsp;Decline
	</button>
	<button type="submit" onclick="window.history.back()"
		class="btn btn-info">
		<span class="glyphicon glyphicon-arrow-left"></span>&nbsp;<span>
			Back</span>
	</button>
</div>
